# Taosi/AMS TSL4531 I2C ambient light sensor

[code]: i2c/tsl4531.fs (i2c)
* Code: [tsl4531.fs](https://github.com/jeelabs/embello/tree/master/explore/1608-forth/flib/i2c/tsl4531.fs)
* Needs: i2c

This is an I2C driver for the Taos/AMS TSL4531 digital light sensor.

### API

To initialize the chip and the driver `tsl4531-init` must be called. This
places the chip in normal (continuous) conversion mode using a 400ms
integration time.  `tsl4531-data` returns the result of the last
conversion as a 32-bit integer Lux value.

[defs]: <> (tsl4531-init tsl4531-data)
```
: bme-init ( -- nak )
: bme-calib ( -- )
```

For low power operation (e.g. battery) the chip can be put to sleep
and woken up when a conversion is desired. Start with `tsl4531-sleep`
and when a conversion is desired, use `tsl4531-convert` to initiate
a one-shot conversion. It returns the number of milliseconds to wait
before the conversion data can be retrieved using `tsl4531-data`. The
chip goes back to sleep automatically after the conversion.

[defs]: <> (tsl4531-sleep tsl4531-convert)
```
: bme-data ( -- )  \ get a sensor reading from the BME280
: bme-calc ( -- h p t )  \ convert reading to calibrated values
```

### Constants

The I2C address is hard-coded as `$29`.
